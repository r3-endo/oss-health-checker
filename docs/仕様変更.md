---

# Sprint 1: Category Dashboard Implementation

## Objective

Implement a category-based OSS health dashboard that:

1. Pre-registers major OSS repositories grouped into:

   * LLM Ecosystem
   * Backend
   * Frontend
2. Computes a numeric health score (0–100)
3. Tracks issue count snapshots for 30-day diff
4. Exposes category-based APIs
5. Displays category tabs in the frontend

This sprint does **NOT** include payment, authentication, dependency analysis, or Slack integration.

---

# Scope

## 1. Database Schema Changes

Add the following tables:

```sql
CREATE TABLE categories (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,
  slug TEXT UNIQUE NOT NULL
);

CREATE TABLE repository_categories (
  repository_id TEXT NOT NULL,
  category_id TEXT NOT NULL,
  PRIMARY KEY(repository_id, category_id)
);

CREATE TABLE repository_snapshots (
  repository_id TEXT NOT NULL,
  recorded_at DATETIME NOT NULL,
  open_issues INTEGER NOT NULL,
  commit_count_30d INTEGER NOT NULL,
  PRIMARY KEY(repository_id, recorded_at)
);
```

Notes:

- Do NOT remove or modify the existing `repositories` table.
- Snapshots are used for 30-day difference calculation.

---

## 2. Seeder Implementation

Create a seeder that:

### Inserts categories:

- `llm`
- `backend`
- `frontend`

### Registers default repositories:

#### LLM

- openai/openai-agent-sdk
- mastra-ai/mastra
- langchain-ai/langchain
- run-llama/llama_index

#### Backend

- spring-projects/spring-boot
- honojs/hono
- nodejs/node

#### Frontend

- facebook/react
- vuejs/core
- sveltejs/svelte

Seeder requirements:

- Idempotent (safe to run multiple times)
- Avoid duplicate inserts
- Automatically associate repositories with correct category

---

## 3. Health Score Implementation

Create a domain-level function:

```ts
function calculateHealthScore(repo): {
  score: number;
  status: "Active" | "Stale" | "Risky";
};
```

### Scoring Rules

Start from 100.

- If last commit > 180 days ago → subtract 40
- If last release > 365 days ago → subtract 20
- If open issues > 100 → subtract 15
- If contributors < 3 → subtract 15

Clamp minimum score to 0.

### Status Mapping

- `Active` → score >= 70
- `Stale` → 40–69
- `Risky` → < 40

Important:

- Do NOT store score in database
- Always compute dynamically

---

## 4. Snapshot Logic

Implement a daily snapshot mechanism:

For each repository:

- Fetch latest open_issues count
- Calculate commit_count_30d (commits in last 30 days)
- Store record in `repository_snapshots`

### Constraints

- Only one snapshot per repo per day
- Skip insert if already recorded today

Cron implementation:

- Use simplest available mechanism:
  - Hono scheduled handler
    OR
  - GitHub Actions scheduled workflow

Prefer minimal infrastructure complexity.

---

## 5. API Endpoints

### GET /api/categories

Response:

```json
[
  {
    "slug": "llm",
    "name": "LLM Ecosystem"
  }
]
```

---

### GET /api/categories/:slug

Response:

```json
{
  "name": "LLM Ecosystem",
  "repositories": [
    {
      "owner": "langchain-ai",
      "name": "langchain",
      "healthScore": 78,
      "status": "Active",
      "lastCommit": "2026-02-01",
      "issueGrowth30d": 12,
      "commitLast30d": 34
    }
  ]
}
```

### Calculation Details

- `issueGrowth30d = current open issues - open issues 30 days ago`
- If 30-day snapshot missing → return null
- Health score computed dynamically
- Sort repositories by healthScore descending

---

## 6. Frontend Changes

Modify UI layout:

### Add Category Tabs at Top

- LLM Ecosystem
- Backend
- Frontend

On tab click:

- Fetch `/api/categories/:slug`
- Render repository table

### Add Table Columns

- Health Score (numeric)
- Status
- Last Commit
- Issue Δ (30d)
- Commits (30d)

Requirements:

- Reuse existing table component if possible
- Avoid duplicated logic
- Show loading and error states

---

## 7. Acceptance Criteria

Sprint is complete when:

- Categories auto-seed on initialization
- Each category displays predefined repositories
- Health score appears numerically
- 30-day issue difference calculated correctly
- Daily snapshot persists successfully
- No regression in existing repository registration functionality

---

## 8. Non-Goals

Do NOT implement:

- Authentication
- Payment integration
- Dependency analysis
- Slack integration
- Machine-learning scoring

---

## 9. Architecture Constraints

- TypeScript strict mode
- No business logic inside route handlers
- Health scoring must be in domain layer
- GitHub API logic must be inside infrastructure adapter
- Maintain Clean Architecture boundaries

---

## Deliverables

- DB migration
- Seeder script
- Health scoring module
- Snapshot service
- Category API routes
- Updated frontend UI
- Cron implementation

---
